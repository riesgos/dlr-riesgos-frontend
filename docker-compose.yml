services:
  
  backend:
    build: ./backend
    image: riesgoscached/backend
    environment:
      port: 80
      maxStoreLifeTimeMinutes: 120
      sendMailTo: michael.langbein@dlr.de
      sourceEmail: test@test.com
      EqCatalogUrl: https://rz-vm140.gfz-potsdam.de/wps/WebProcessingService
      EqSimUrl: https://rz-vm140.gfz-potsdam.de/wps/WebProcessingService
      FragilityUrl: https://rz-vm140.gfz-potsdam.de/wps/WebProcessingService
      ExposureUrl: https://rz-vm140.gfz-potsdam.de/wps/WebProcessingService
      DeusUrl: https://rz-vm140.gfz-potsdam.de/wps/WebProcessingService
      NeptunusUrl: https://rz-vm140.gfz-potsdam.de/wps/WebProcessingService
      VolcanusUrl: https://rz-vm140.gfz-potsdam.de/wps/WebProcessingService
      TsunamiUrl: https://riesgos.52north.org/wps
      SysrelUrl: https://riesgos.52north.org/javaps/service
      SysrelEcuadorUrl: https://riesgos.52north.org/javaps/service
      LaharUrl: https://riesgos.52north.org/geoserver/ows
      CacheServer: http://10.17.192.96/geoserver/riesgos/wms

  compare-frontend:
    build: ./compare-frontend
    image: riesgoscached/compare-frontend
    environment:
      subPath: "/light/"
      backendUrl: http://10.17.192.96/backend/
      allowedScenarios: '["ChileCached", "PeruCached"]'

  cache-server:
    image: docker.osgeo.org/geoserver:2.23.1
    environment:
      CORS_ENABLED: true
      SKIP_DEMO_DATA: true
    volumes:
      - ./geoServerData:/opt/geoserver_data

  proxy:
    image: nginx:1.23.2-alpine
    ports:
      - 80:80
    volumes:
      - ./reverse_proxy/default.conf:/etc/nginx/conf.d/default.conf:ro
      
